from src.progress import *

progress_data = {'/Users/simonglenn/Desktop/Viewer/projects/Lions_1.2': {'clusters': {'Singles': {'matches': ['O028.jpg', 'R001.jpg', 'R002.jpg', 'R004.jpg', 'R006.jpg', 'R007.jpg', 'R008.jpg', 'R009.jpg', 'R010.jpg', 'R012.jpg', 'R013.jpg', 'R014.jpg', 'R015.jpg', 'R022.jpg', 'R023.jpg', 'R026.jpg', 'R027.jpg', 'R029.jpg', 'R030.jpg', 'R033.jpg', 'R034.jpg', 'R035.jpg', 'R036.jpg', 'R037.jpg', 'R038.jpg', 'R039.jpg', 'R043.jpg', 'R053.jpg', 'R060.jpg', 'R061.jpg', 'R062.jpg', 'R072.jpg', 'R075.jpg', 'R076.jpg', 'R078.jpg', 'R079.jpg', 'R080.jpg', 'R081.jpg', 'R082.jpg', 'R083.jpg', 'R084.jpg', 'R085.jpg', 'R086.jpg', 'R088.jpg', 'R089.jpg', 'R092.jpg', 'R094.jpg', 'R096.jpg', 'R097.jpg', 'R098.jpg', 'R099.jpg', 'R103.jpg', 'R107.jpg', 'R108.jpg', 'R112.jpg', 'R113.jpg', 'R115.jpg', 'R116.jpg', 'R117.jpg', 'R120.jpg', 'R122.jpg', 'R123.jpg', 'R125.jpg', 'R127.jpg', 'R128.jpg', 'R129.jpg', 'R135.jpg', 'R136.jpg', 'R137.jpg', 'R138.jpg', 'R139.jpg', 'R140.jpg', 'R141.jpg', 'R142.jpg', 'R143.jpg', 'R144.jpg', 'R145.jpg', 'R146.jpg', 'R147.jpg', 'R148.jpg', 'R149.jpg', 'R151.jpg', 'R152.jpg', 'R153.jpg', 'R154.jpg', 'R155.jpg', 'R156.jpg', 'R157.jpg', 'R158.jpg', 'R159.jpg', 'R160.jpg', 'R161.jpg', 'R162.jpg', 'R163.jpg', 'R164.jpg', 'R165.jpg', 'R166.jpg', 'R167.jpg', 'R168.jpg', 'R169.jpg', 'R170.jpg', 'R171.jpg', 'R172.jpg', 'R173.jpg', 'R174.jpg', 'R175.jpg', 'R176.jpg', 'R177.jpg', 'R178.jpg', 'R179.jpg', 'R180.jpg', 'R181.jpg', 'R182.jpg', 'R183.jpg', 'R184.jpg', 'R185.jpg', 'R186.jpg', 'R187.jpg', 'R188.jpg', 'R189.jpg', 'R204.jpg', 'R205.jpg', 'R206.jpg', 'R207.jpg', 'R208.jpg', 'R209.jpg', 'R210.jpg', 'R211.jpg', 'R212.jpg', 'R213.jpg', 'R214.jpg', 'R215.jpg', 'R220.jpg', 'R221.jpg', 'R222.jpg', 'R223.jpg', 'R224.jpg', 'R225.jpg', 'R226.jpg', 'R230.jpg', 'R232.jpg', 'R233.jpg', 'R235.jpg', 'R247.jpg', 'R263.jpg', 'R268.jpg', 'R271.jpg', 'R272.jpg', 'R288.jpg', 'R289.jpg', 'R290.jpg', 'R314.jpg', 'R320.jpg', 'R327.jpg', 'R349.jpg', 'R354.jpg', 'R359.jpg', 'R360.jpg', 'R361.jpg', 'R375.jpg', 'R376.jpg', 'R377.jpg', 'R378.jpg', 'R379.jpg', 'R380.jpg', 'R381.jpg', 'R382.jpg', 'R384.jpg', 'R386.jpg', 'R387.jpg', 'R389.jpg', 'R392.jpg', 'R394.jpg', 'R395.jpg', 'R396.jpg', 'R398.jpg', 'R401.jpg', 'R404.jpg', 'R407.jpg', 'R408.jpg', 'R410.jpg', 'R412.jpg', 'R413.jpg', 'R414.jpg', 'R416.jpg', 'R417.jpg', 'R418.jpg', 'R419.jpg', 'R421.jpg', 'R424.jpg', 'R425.jpg', 'R430.jpg', 'R431.jpg', 'R437.jpg', 'R439.jpg', 'R440.jpg', 'R444.jpg', 'R445.jpg', 'R446.jpg', 'R450.jpg', 'R451.jpg', 'R452.jpg', 'R453.jpg', 'R460.jpg', 'R465.jpg', 'R466.jpg', 'R469.jpg', 'R470.jpg', 'R472.jpg', 'R479.jpg', 'R480.jpg', 'R482.jpg', 'R483.jpg', 'R485.jpg', 'R489.jpg', 'R490.jpg', 'R492.jpg', 'R499.jpg', 'R505.jpg', 'R506.jpg', 'R516.jpg', 'R517.jpg', 'R518.jpg', 'R526.jpg', 'R531.jpg', 'R533.jpg', 'R537.jpg', 'R538.jpg', 'R539.jpg', 'R541.jpg', 'R544.jpg', 'R546.jpg', 'R547.jpg', 'R551.jpg', 'R552.jpg', 'R553.jpg', 'R557.jpg', 'R558.jpg', 'R559.jpg', 'R560.jpg', 'R561.jpg', 'R562.jpg', 'R563.jpg', 'R564.jpg', 'R565.jpg', 'R566.jpg', 'R568.jpg', 'R569.jpg', 'R570.jpg', 'R572.jpg', 'R577.jpg', 'R578.jpg', 'R579.jpg', 'R580.jpg', 'R582.jpg', 'R583.jpg', 'R588.jpg', 'R590.jpg', 'R591.jpg', 'R592.jpg', 'R593.jpg', 'R594.jpg', 'R595.jpg', 'R596.jpg', 'R597.jpg', 'R599.jpg', 'R600.jpg', 'R601.jpg', 'R602.jpg', 'R603.jpg', 'R605.jpg', 'R606.jpg', 'R608.jpg', 'R609.jpg', 'R611.jpg', 'R612.jpg', 'R613.jpg', 'R615.jpg', 'R616.jpg', 'R617.jpg', 'R621.jpg', 'R624.jpg', 'R626.jpg', 'R627.jpg', 'R628.jpg', 'R629.jpg', 'R632.jpg', 'R636.jpg', 'R638.jpg', 'R641.jpg', 'R642.jpg', 'R644.jpg', 'R645.jpg', 'R646.jpg', 'R647.jpg', 'R648.jpg', 'R649.jpg', 'R650.jpg', 'R651.jpg', 'R652.jpg', 'R654.jpg', 'R656.jpg', 'R659.jpg', 'R660.jpg', 'R661.jpg', 'R662.jpg', 'R663.jpg', 'R664.jpg', 'R665.jpg', 'R666.jpg', 'R667.jpg', 'R668.jpg', 'R669.jpg', 'R670.jpg', 'R671.jpg', 'R352.jpg', 'R495.jpg', 'R438.jpg', 'R476.jpg', 'R523.jpg', 'R501.jpg', 'R239.jpg', 'R534.jpg', 'R244.jpg', 'R549.jpg', 'R467.jpg', 'R532.jpg', 'R024.jpg', 'R019.jpg', 'R535.jpg', 'R005.jpg', 'R400.jpg', 'R633.jpg', 'R449.jpg', 'R236.jpg', 'R258.jpg', 'R411.jpg', 'R511.jpg', 'R488.jpg', 'R504.jpg', 'R267.jpg', 'R264.jpg', 'R393.jpg', 'R262.jpg', 'R250.jpg', 'R241.jpg', 'R011.jpg', 'R468.jpg', 'R443.jpg', 'R556.jpg', 'R554.jpg', 'R585.jpg', 'R478.jpg', 'R441.jpg', 'R672.jpg', 'R041.jpg', 'R237.jpg', 'R458.jpg', 'R047.jpg', 'R046.jpg', 'R067.jpg', 'R052.jpg', 'R074.jpg', 'R059.jpg', 'R240.jpg', 'R064.jpg', 'R058.jpg', 'R587.jpg', 'R040.jpg', 'R071.jpg', 'R055.jpg', 'R069.jpg', 'R070.jpg', 'R073.jpg', 'R077.jpg', 'R063.jpg', 'R051.jpg', 'R066.jpg', 'R056.jpg', 'R068.jpg', 'R110.jpg', 'R057.jpg', 'R432.jpg', 'R054.jpg', 'R050.jpg', 'R105.jpg', 'R093.jpg', 'R114.jpg', 'R133.jpg', 'R100.jpg', 'R131.jpg', 'R130.jpg', 'R134.jpg', 'R095.jpg', 'R109.jpg', 'R090.jpg', 'R091.jpg', 'R132.jpg', 'R126.jpg', 'R101.jpg', 'R087.jpg', 'R111.jpg', 'R119.jpg', 'R104.jpg', 'R106.jpg', 'R124.jpg', 'R433.jpg', 'R118.jpg', 'R121.jpg', 'R102.jpg', 'R344.jpg', 'R454.jpg', 'R150.jpg', 'R545.jpg', 'R405.jpg', 'R257.jpg', 'R500.jpg', 'R493.jpg', 'R277.jpg', 'R548.jpg', 'R238.jpg', 'R494.jpg', 'R256.jpg', 'R491.jpg', 'R464.jpg', 'R524.jpg', 'R231.jpg', 'R503.jpg', 'R484.jpg', 'R536.jpg', 'R514.jpg', 'R248.jpg', 'R634.jpg', 'R635.jpg', 'R259.jpg', 'R522.jpg', 'R529.jpg', 'R513.jpg', 'R622.jpg', 'R496.jpg', 'R261.jpg', 'R246.jpg', 'R486.jpg', 'R399.jpg', 'R507.jpg', 'R249.jpg', 'R260.jpg', 'R253.jpg', 'R252.jpg', 'R463.jpg', 'R265.jpg', 'R429.jpg', 'R266.jpg', 'R251.jpg', 'R254.jpg', 'R243.jpg', 'R508.jpg', 'R509.jpg', 'R390.jpg', 'R255.jpg', 'R286.jpg', 'R498.jpg', 'R584.jpg', 'R287.jpg', 'R282.jpg', 'R586.jpg', 'R422.jpg', 'R607.jpg', 'R574.jpg', 'R285.jpg', 'R296.jpg', 'R403.jpg', 'R428.jpg', 'R280.jpg', 'R281.jpg', 'R269.jpg', 'R275.jpg', 'R279.jpg', 'R298.jpg', 'R278.jpg', 'R274.jpg', 'R292.jpg', 'R297.jpg', 'R459.jpg', 'R295.jpg', 'R293.jpg', 'R515.jpg', 'R276.jpg', 'R273.jpg', 'R283.jpg', 'R294.jpg', 'R270.jpg', 'R318.jpg', 'R319.jpg', 'R331.jpg', 'R313.jpg', 'R348.jpg', 'R365.jpg', 'R542.jpg', 'R310.jpg', 'R343.jpg', 'R351.jpg', 'R370.jpg', 'R311.jpg', 'R362.jpg', 'R345.jpg', 'R373.jpg', 'R284.jpg', 'R462.jpg', 'R581.jpg', 'R573.jpg', 'R576.jpg', 'R575.jpg', 'R448.jpg', 'R555.jpg', 'R571.jpg', 'R540.jpg', 'R388.jpg', 'R543.jpg', 'R291.jpg', 'R301.jpg', 'R302.jpg', 'R300.jpg', 'R473.jpg', 'R323.jpg', 'R326.jpg', 'R308.jpg', 'R363.jpg', 'R309.jpg', 'R315.jpg', 'R321.jpg', 'R325.jpg', 'R307.jpg', 'R322.jpg', 'R324.jpg', 'R316.jpg', 'R303.jpg', 'R328.jpg', 'R312.jpg', 'R436.jpg', 'R367.jpg', 'R332.jpg', 'R329.jpg', 'R330.jpg', 'R317.jpg', 'R474.jpg', 'R369.jpg', 'R337.jpg', 'R336.jpg', 'R366.jpg', 'R339.jpg', 'R457.jpg', 'R347.jpg', 'R353.jpg', 'R357.jpg', 'R335.jpg', 'R409.jpg', 'R346.jpg', 'R340.jpg', 'R358.jpg', 'R364.jpg', 'R356.jpg', 'R368.jpg', 'R350.jpg', 'R342.jpg', 'R341.jpg', 'R355.jpg', 'R338.jpg', 'R334.jpg', 'R406.jpg', 'R618.jpg', 'R655.jpg', 'R402.jpg', 'R604.jpg', 'R614.jpg', 'R397.jpg', 'R610.jpg', 'R631.jpg', 'R630.jpg', 'R619.jpg', 'R620.jpg', 'R385.jpg', 'R383.jpg', 'R589.jpg', 'R391.jpg'], 'nomatches': [], 'identicals': [], 'best_image_name': 'O028.jpg'}, 'R025_R456': {'identicals': [], 'matches': ['R025.jpg'], 'nomatches': [], 'best_image_name': 'R456.jpg'}, 'R031_R643': {'identicals': [], 'matches': ['R643.jpg'], 'nomatches': ['R468.jpg', 'R443.jpg'], 'best_image_name': 'R031.jpg'}, 'R032_R567': {'identicals': [], 'matches': ['R567.jpg'], 'nomatches': ['R556.jpg', 'R554.jpg', 'R585.jpg', 'R478.jpg', 'R441.jpg', 'R672.jpg'], 'best_image_name': 'R032.jpg'}, 'R044_R045': {'identicals': [], 'matches': ['R045.jpg'], 'nomatches': [], 'best_image_name': 'R044.jpg'}, 'R048_R049': {'identicals': [], 'matches': ['R049.jpg'], 'nomatches': [], 'best_image_name': 'R048.jpg'}, 'R203_R653': {'identicals': [], 'matches': ['R653.jpg'], 'nomatches': [], 'best_image_name': 'R203.jpg'}, 'R234_R481': {'identicals': [], 'matches': ['R234.jpg'], 'nomatches': [], 'best_image_name': 'R481.jpg'}, 'R242_R245_R502': {'identicals': [], 'matches': ['R242.jpg', 'R245.jpg'], 'nomatches': ['R503.jpg', 'R484.jpg', 'R536.jpg', 'R514.jpg', 'R248.jpg', 'R634.jpg', 'R635.jpg', 'R259.jpg', 'R522.jpg', 'R529.jpg', 'R513.jpg', 'R622.jpg', 'R496.jpg'], 'best_image_name': 'R502.jpg'}, 'R299_R512': {'identicals': [], 'matches': ['R299.jpg'], 'nomatches': [], 'best_image_name': 'R512.jpg'}, 'R304_R305_R306': {'identicals': [], 'matches': ['R306.jpg', 'R305.jpg'], 'nomatches': ['R328.jpg', 'R312.jpg', 'R436.jpg', 'R367.jpg'], 'best_image_name': 'R304.jpg'}, 'R333_R461_R471': {'identicals': [], 'matches': ['R333.jpg', 'R461.jpg'], 'nomatches': ['R474.jpg', 'R369.jpg', 'R337.jpg', 'R336.jpg', 'R366.jpg', 'R339.jpg', 'R457.jpg', 'R347.jpg', 'R353.jpg', 'R357.jpg', 'R335.jpg', 'R409.jpg', 'R346.jpg'], 'best_image_name': 'R471.jpg'}, 'R371_R372_R415': {'identicals': [], 'matches': ['R415.jpg', 'R371.jpg'], 'nomatches': [], 'best_image_name': 'R372.jpg'}, 'R374_R420_R434': {'identicals': [], 'matches': ['R420.jpg', 'R434.jpg'], 'nomatches': [], 'best_image_name': 'R374.jpg'}, 'R423_R426': {'identicals': [], 'matches': ['R423.jpg'], 'nomatches': [], 'best_image_name': 'R426.jpg'}, 'R427_R475_R521': {'identicals': [], 'matches': ['R427.jpg', 'R521.jpg'], 'nomatches': [], 'best_image_name': 'R475.jpg'}, 'R435_R550_R637': {'identicals': [], 'matches': ['R637.jpg', 'R550.jpg'], 'nomatches': [], 'best_image_name': 'R435.jpg'}, 'R442_R598': {'identicals': [], 'matches': ['R598.jpg'], 'nomatches': [], 'best_image_name': 'R442.jpg'}, 'R447_R455': {'identicals': [], 'matches': ['R455.jpg'], 'nomatches': [], 'best_image_name': 'R447.jpg'}, 'R477_R487': {'identicals': [], 'matches': ['R487.jpg'], 'nomatches': [], 'best_image_name': 'R477.jpg'}, 'R497_R527': {'identicals': [], 'matches': ['R527.jpg'], 'nomatches': [], 'best_image_name': 'R497.jpg'}, 'R510_R525': {'identicals': [], 'matches': ['R525.jpg'], 'nomatches': [], 'best_image_name': 'R510.jpg'}, 'R519_R528': {'identicals': [], 'matches': ['R528.jpg'], 'nomatches': [], 'best_image_name': 'R519.jpg'}, 'R520_R530': {'identicals': [], 'matches': ['R530.jpg'], 'nomatches': [], 'best_image_name': 'R520.jpg'}, 'R623_R625': {'identicals': [], 'matches': ['R625.jpg'], 'nomatches': [], 'best_image_name': 'R623.jpg'}, 'R639_R640': {'identicals': [], 'matches': ['R640.jpg'], 'nomatches': [], 'best_image_name': 'R639.jpg'}, 'R657_R658': {'identicals': [], 'matches': ['R658.jpg'], 'nomatches': [], 'best_image_name': 'R657.jpg'}}, 'stages': {'0': {'clusters_yet_to_check': [], 'current_cluster': 'R657_R658', 'past_comparisons': {'R005.jpg': [], 'R011.jpg': [], 'R025.jpg': [], 'R456.jpg': [], 'R031.jpg': [], 'R032.jpg': [], 'R040.jpg': [], 'R044.jpg': [], 'R048.jpg': [], 'R050.jpg': [], 'R087.jpg': [], 'R102.jpg': [], 'R150.jpg': [], 'R203.jpg': [], 'R231.jpg': [], 'R234.jpg': [], 'R481.jpg': [], 'R242.jpg': [], 'R502.jpg': [], 'R243.jpg': [], 'R255.jpg': [], 'R269.jpg': [], 'R270.jpg': [], 'R284.jpg': [], 'R291.jpg': [], 'R299.jpg': [], 'R512.jpg': [], 'R300.jpg': [], 'R303.jpg': [], 'R304.jpg': [], 'R317.jpg': [], 'R333.jpg': [], 'R471.jpg': [], 'R334.jpg': [], 'R371.jpg': [], 'R372.jpg': [], 'R374.jpg': [], 'R383.jpg': [], 'R391.jpg': [], 'R423.jpg': [], 'R426.jpg': [], 'R427.jpg': [], 'R475.jpg': [], 'R435.jpg': [], 'R442.jpg': [], 'R447.jpg': [], 'R477.jpg': [], 'R497.jpg': [], 'R510.jpg': [], 'R519.jpg': [], 'R520.jpg': [], 'R623.jpg': [], 'R639.jpg': [], 'R657.jpg': []}}}}}
#the path name in the progress data from activities.log
project_path = '/Users/simonglenn/Desktop/Viewer/projects/Lions_1.2'
#original folder with clusters
project_folder = "/Users/rui/Desktop/lions_full"
#where do you wish to save the folders
save_address = "/Users/rui/Desktop"

def create_image_folder(new_project_address):
    if not os.path.exists(new_project_address):
        os.makedirs(new_project_address)
    for file_extension in ("*.jpg", "*.jpeg", "*.png"):
        for file_path in glob.glob(os.path.join(project_folder, '**', file_extension), recursive=True):
            new_path = os.path.join(new_project_address, os.path.basename(file_path))
            shutil.copy(file_path, new_path)

def export_data_to_folder():
    project_name = os.path.basename(project_path)
    new_project_address =os.path.join(save_address, f"{project_name}_recovered")


    create_image_folder(new_project_address)

    new_progress_data = {new_project_address: progress_data[project_path]}
    keep_progress = True
    export_results(new_project_address, new_progress_data, save_address, keep_progress)

def restore_progress():
    """read progress data and create objects"""
    app_folder = str(Path(__file__).resolve().parent.parent)

    project_name = os.path.basename(project_path)
    new_project_address = os.path.join(app_folder,"projects",f"{project_name}_recovered")
    create_image_folder(new_project_address)

    data_file = open("data.json", "r")
    existing_progress_data = json.loads(data_file.read())
    existing_progress_data[new_project_address] = progress_data[project_path]
    data_file = open("data.json", "w")
    json.dump(existing_progress_data, data_file)
    data_file.close()