from src.progress import *

progress_data = {'antimachus-ii reverses (5-jun-22) prediction': {'clusters': {'Singles': {'matches': ['R281.jpg', 'R008.jpg', 'R018.jpg', 'R226.jpg', 'R085.jpg', 'R174.jpg', 'R231.jpg', 'R269.jpg', 'R272.jpg', 'R156.jpg', 'R182.jpg', 'R257.jpg', 'R096.jpg', 'R177.jpg', 'R268.jpg', 'R193.jpg', 'R115.jpg', 'R303.jpg', 'R187.jpg', 'R302.jpg', 'R189.jpg', 'R176.jpg', 'R240.jpg', 'R203.jpg', 'R241.jpg', 'R074.jpg', 'R146.jpg', 'R087.jpg', 'R224.jpg', 'R178.jpg', 'R282.jpg', 'R285.jpg', 'R061.jpg', 'R251.jpg', 'R128.jpg', 'R015.jpg', 'R141.jpg', 'R151.jpg', 'R252.jpg', 'R216.jpg', 'R009.jpg', 'R093.jpg', 'R208.jpg', 'R171.jpg', 'R261.jpg', 'R284.jpg', 'R048.jpg', 'R308.jpg', 'R236.jpg', 'R265.jpg', 'R312.jpg', 'R076.jpg', 'R118.jpg', 'R165.jpg', 'R089.jpg', 'R191.jpg', 'R248.jpg', 'R296.jpg', 'R300.jpg', 'R150.jpg', 'R148.jpg', 'R108.jpg', 'R242.jpg', 'R277.jpg', 'R175.jpg', 'R091.jpg', 'R100.jpg', 'R299.jpg', 'R295.jpg', 'R202.jpg', 'R185.jpg', 'R227.jpg', 'R294.jpg', 'R283.jpg', 'R271.jpg', 'R011.jpg', 'R314.jpg', 'R155.jpg', 'R169.jpg', 'R264.jpg', 'R234.jpg', 'R205.jpg', 'R287.jpg', 'R026.jpg', 'R199.jpg', 'R195.jpg', 'R145.jpg', 'R088.jpg', 'R221.jpg', 'R194.jpg', 'R101.jpg', 'R225.jpg', 'R073.jpg', 'R274.jpg', 'R207.jpg', 'R315.jpg', 'R006.jpg', 'R249.jpg', 'R086.jpg', 'R292.jpg', 'R068.jpg', 'R237.jpg', 'R065.jpg', 'R239.jpg', 'R213.jpg', 'R113.jpg', 'R262.jpg', 'R250.jpg', 'R253.jpg', 'R266.jpg', 'R010.jpg', 'R270.jpg', 'R140.jpg', 'R211.jpg', 'R218.jpg', 'R243.jpg', 'R210.jpg', 'R134.jpg', 'R025.jpg', 'R280.jpg', 'R297.jpg', 'R037.jpg', 'R209.jpg', 'R012.jpg', 'R045.jpg', 'R139.jpg', 'R233.jpg', 'R044.jpg', 'R034.jpg', 'R051.jpg', 'R119.jpg', 'R170.jpg', 'R050.jpg', 'R289.jpg', 'R247.jpg', 'R198.jpg', 'R041.jpg', 'R167.jpg', 'R181.jpg', 'R106.jpg', 'R301.jpg', 'R095.jpg', 'R137.jpg', 'R212.jpg', 'R311.jpg', 'R135.jpg', 'R228.jpg', 'R183.jpg', 'R153.jpg', 'R196.jpg', 'R215.jpg', 'R184.jpg', 'R276.jpg', 'R238.jpg', 'R056.jpg', 'R229.jpg', 'R256.jpg', 'R023.jpg', 'R204.jpg', 'R259.jpg', 'R180.jpg', 'R273.jpg', 'R214.jpg', 'R040.jpg', 'R053.jpg', 'R206.jpg', 'R309.jpg', 'R007.jpg', 'R220.jpg', 'R136.jpg', 'R260.jpg', 'R097.jpg', 'R024.jpg', 'R258.jpg', 'R159.jpg', 'R305.jpg', 'R291.jpg', 'R042.jpg', 'R186.jpg', 'R219.jpg', 'R288.jpg', 'R029.jpg', 'R190.jpg', 'R246.jpg', 'R138.jpg', 'R154.jpg', 'R267.jpg', 'R188.jpg', 'R223.jpg', 'R017.jpg', 'R179.jpg'], 'nomatches': [], 'identicals': [], 'best_image_name': 'R003.jpg'}, 'R001_R126_R286': {'identicals': [], 'matches': ['R126.jpg', 'R286.jpg'], 'nomatches': [], 'best_image_name': 'R001.jpg'}, 'R004_R161': {'identicals': [], 'matches': ['R161.jpg'], 'nomatches': [], 'best_image_name': 'R004.jpg'}, 'R005_R055_R127_R166': {'identicals': [], 'matches': ['R055.jpg', 'R127.jpg', 'R166.jpg'], 'nomatches': ['R008.jpg', 'R297.jpg'], 'best_image_name': 'R005.jpg'}, 'R016_R028_R298': {'identicals': [], 'matches': ['R028.jpg', 'R298.jpg'], 'nomatches': [], 'best_image_name': 'R016.jpg'}, 'R020_R046_R058': {'identicals': [], 'matches': ['R058.jpg', 'R046.jpg'], 'nomatches': [], 'best_image_name': 'R020.jpg'}, 'R021_R120': {'identicals': [], 'matches': ['R120.jpg'], 'nomatches': ['R025.jpg', 'R038.jpg', 'R079.jpg', 'R144.jpg'], 'best_image_name': 'R021.jpg'}, 'R022_R030': {'identicals': [], 'matches': ['R030.jpg'], 'nomatches': [], 'best_image_name': 'R022.jpg'}, 'R032_R201': {'identicals': [], 'matches': ['R201.jpg'], 'nomatches': [], 'best_image_name': 'R032.jpg'}, 'R035_R117': {'identicals': [], 'matches': ['R117.jpg'], 'nomatches': [], 'best_image_name': 'R035.jpg'}, 'R036_R072': {'identicals': [], 'matches': ['R072.jpg'], 'nomatches': [], 'best_image_name': 'R036.jpg'}, 'R039_R102': {'identicals': [], 'matches': ['R102.jpg'], 'nomatches': [], 'best_image_name': 'R039.jpg'}, 'R043_R293': {'identicals': [], 'matches': ['R293.jpg'], 'nomatches': ['R162.jpg', 'R185.jpg', 'R145.jpg', 'R291.jpg'], 'best_image_name': 'R043.jpg'}, 'R054_R230': {'identicals': [], 'matches': ['R230.jpg'], 'nomatches': ['R215.jpg', 'R171.jpg', 'R186.jpg', 'R136.jpg', 'R129.jpg', 'R134.jpg', 'R118.jpg', 'R151.jpg', 'R184.jpg'], 'best_image_name': 'R054.jpg'}, 'R080_R103_R164_R109': {'identicals': [], 'matches': ['R164.jpg', 'R103.jpg', 'R109.jpg'], 'nomatches': [], 'best_image_name': 'R080.jpg'}, 'R081_R104_R110': {'identicals': [], 'matches': ['R104.jpg', 'R110.jpg'], 'nomatches': [], 'best_image_name': 'R081.jpg'}, 'R082_R149': {'identicals': [], 'matches': ['R149.jpg'], 'nomatches': ['R084.jpg', 'R131.jpg'], 'best_image_name': 'R082.jpg'}, 'R094_R197': {'identicals': [], 'matches': ['R197.jpg'], 'nomatches': [], 'best_image_name': 'R094.jpg'}, 'R107_R111_R071': {'identicals': [], 'matches': ['R111.jpg', 'R071.jpg'], 'nomatches': ['R216.jpg', 'R114.jpg'], 'best_image_name': 'R107.jpg'}, 'R124_R158': {'identicals': [], 'matches': ['R158.jpg'], 'nomatches': [], 'best_image_name': 'R124.jpg'}, 'R200_R245': {'identicals': [], 'matches': ['R245.jpg'], 'nomatches': [], 'best_image_name': 'R200.jpg'}, 'R217_R304_R279': {'identicals': [], 'matches': ['R304.jpg', 'R279.jpg'], 'nomatches': [], 'best_image_name': 'R217.jpg'}, 'R310_R313': {'identicals': [], 'matches': ['R313.jpg'], 'nomatches': [], 'best_image_name': 'R310.jpg'}, 'R013_R067_R013': {'identicals': [], 'matches': ['R067.jpg'], 'nomatches': [], 'best_image_name': 'R013.jpg'}, 'R014_R278_R014': {'identicals': [], 'matches': ['R278.jpg'], 'nomatches': [], 'best_image_name': 'R014.jpg'}, 'R019_R143_R019': {'identicals': [], 'matches': ['R143.jpg'], 'nomatches': [], 'best_image_name': 'R019.jpg'}, 'R027_R192_R027': {'identicals': [], 'matches': ['R192.jpg'], 'nomatches': [], 'best_image_name': 'R027.jpg'}, 'R031_R254_R090_R031': {'identicals': [], 'matches': ['R254.jpg', 'R090.jpg'], 'nomatches': [], 'best_image_name': 'R031.jpg'}, 'R033_R255_R033': {'identicals': [], 'matches': ['R255.jpg'], 'nomatches': [], 'best_image_name': 'R033.jpg'}, 'R038_R079_R038': {'identicals': [], 'matches': ['R079.jpg'], 'nomatches': [], 'best_image_name': 'R038.jpg'}, 'R047_R052_R098_R047': {'identicals': [], 'matches': ['R052.jpg', 'R098.jpg'], 'nomatches': [], 'best_image_name': 'R047.jpg'}, 'R049_R157_R049': {'identicals': [], 'matches': ['R157.jpg'], 'nomatches': [], 'best_image_name': 'R049.jpg'}, 'R059_R244_R235_R059': {'identicals': [], 'matches': ['R244.jpg', 'R235.jpg'], 'nomatches': [], 'best_image_name': 'R059.jpg'}, 'R060_R078_R060': {'identicals': [], 'matches': ['R078.jpg'], 'nomatches': [], 'best_image_name': 'R060.jpg'}, 'R062_R275_R172_R160_R062': {'identicals': [], 'matches': ['R275.jpg', 'R172.jpg', 'R160.jpg'], 'nomatches': [], 'best_image_name': 'R062.jpg'}, 'R064_R152_R064': {'identicals': [], 'matches': ['R152.jpg'], 'nomatches': [], 'best_image_name': 'R064.jpg'}, 'R066_R070_R077_R066': {'identicals': [], 'matches': ['R070.jpg', 'R077.jpg'], 'nomatches': [], 'best_image_name': 'R066.jpg'}, 'R075_R232_R075': {'identicals': [], 'matches': ['R232.jpg'], 'nomatches': [], 'best_image_name': 'R075.jpg'}, 'R083_R263_R083': {'identicals': [], 'matches': ['R263.jpg'], 'nomatches': [], 'best_image_name': 'R083.jpg'}, 'R084_R131_R084': {'identicals': [], 'matches': ['R131.jpg'], 'nomatches': [], 'best_image_name': 'R084.jpg'}, 'R092_R222_R092': {'identicals': [], 'matches': ['R222.jpg'], 'nomatches': [], 'best_image_name': 'R092.jpg'}, 'R099_R142_R099': {'identicals': [], 'matches': ['R142.jpg'], 'nomatches': [], 'best_image_name': 'R099.jpg'}, 'R116_R121_R123_R116': {'identicals': [], 'matches': ['R121.jpg', 'R123.jpg'], 'nomatches': [], 'best_image_name': 'R116.jpg'}, 'R129_R162_R129': {'identicals': [], 'matches': ['R162.jpg'], 'nomatches': [], 'best_image_name': 'R129.jpg'}, 'R133_R114_R133': {'identicals': [], 'matches': ['R114.jpg'], 'nomatches': [], 'best_image_name': 'R133.jpg'}, 'R144_R307_R144': {'identicals': [], 'matches': ['R307.jpg'], 'nomatches': [], 'best_image_name': 'R144.jpg'}, 'R168_R306_R168': {'identicals': [], 'matches': ['R306.jpg'], 'nomatches': [], 'best_image_name': 'R168.jpg'}, 'R173_R290_R173': {'identicals': [], 'matches': ['R290.jpg'], 'nomatches': [], 'best_image_name': 'R173.jpg'}}, 'stages': {'2': {'clusters_yet_to_check': ['R281.jpg', 'R226.jpg', 'R231.jpg', 'R269.jpg', 'R272.jpg', 'R182.jpg', 'R257.jpg', 'R268.jpg', 'R193.jpg', 'R303.jpg', 'R187.jpg', 'R302.jpg', 'R189.jpg', 'R240.jpg', 'R203.jpg', 'R241.jpg', 'R285.jpg', 'R224.jpg', 'R282.jpg', 'R251.jpg', 'R252.jpg', 'R216.jpg', 'R208.jpg', 'R261.jpg', 'R284.jpg', 'R308.jpg', 'R236.jpg', 'R265.jpg', 'R312.jpg', 'R191.jpg', 'R248.jpg', 'R300.jpg', 'R296.jpg', 'R242.jpg', 'R277.jpg', 'R299.jpg', 'R295.jpg', 'R202.jpg', 'R185.jpg', 'R227.jpg', 'R294.jpg', 'R283.jpg', 'R271.jpg', 'R314.jpg', 'R264.jpg', 'R234.jpg', 'R205.jpg', 'R287.jpg', 'R199.jpg', 'R195.jpg', 'R221.jpg', 'R194.jpg', 'R225.jpg', 'R274.jpg', 'R207.jpg', 'R315.jpg', 'R249.jpg', 'R292.jpg', 'R237.jpg', 'R239.jpg', 'R213.jpg', 'R262.jpg', 'R250.jpg', 'R253.jpg', 'R266.jpg', 'R270.jpg', 'R218.jpg', 'R211.jpg', 'R243.jpg', 'R210.jpg', 'R280.jpg', 'R297.jpg', 'R209.jpg', 'R233.jpg', 'R289.jpg', 'R247.jpg', 'R198.jpg', 'R181.jpg', 'R301.jpg', 'R212.jpg', 'R311.jpg', 'R228.jpg', 'R183.jpg', 'R196.jpg', 'R215.jpg', 'R184.jpg', 'R276.jpg', 'R238.jpg', 'R229.jpg', 'R256.jpg', 'R204.jpg', 'R259.jpg', 'R180.jpg', 'R273.jpg', 'R214.jpg', 'R206.jpg', 'R309.jpg', 'R220.jpg', 'R260.jpg', 'R258.jpg', 'R305.jpg', 'R291.jpg', 'R186.jpg', 'R219.jpg', 'R288.jpg', 'R190.jpg', 'R246.jpg', 'R267.jpg', 'R188.jpg', 'R223.jpg'], 'current_cluster': 'R179', 'clusters_done': []}}}}

#the path name in the progress data from activities.log
project_name = "antimachus-ii reverses (5-jun-22) prediction"
#original folder with AI-computed clusters
project_folder = ""
#where do you wish to save the exported folders
save_address = "/Users/rui/Desktop"

def create_image_folder(new_project_address):
    """Create a folder under /projecct by copying images from project_folder
    """
    if not os.path.exists(new_project_address):
        os.makedirs(new_project_address)
    for file_extension in ("*.jpg", "*.jpeg", "*.png"):
        for file_path in glob.glob(os.path.join(project_folder, '**', file_extension), recursive=True):
            new_path = os.path.join(new_project_address, os.path.basename(file_path))
            shutil.copy(file_path, new_path)

def export_data_to_folder():
    new_project_address =os.path.join(save_address, f"{project_name}_recovered")
    create_image_folder(new_project_address)

    new_progress_data = {new_project_address: progress_data[project_name]}
    keep_progress = True
    export_results(new_project_address, new_progress_data, save_address, keep_progress)

def restore_progress():
    """read progress data and create objects"""
    app_folder = str(Path(__file__).resolve().parent.parent)

    new_project_address = os.path.join(app_folder,"projects",f"{project_name}_recovered")
    create_image_folder(new_project_address)

    data_file = open(os.path.join(save_address, "data.json"), "r")
    existing_progress_data = json.loads(data_file.read())
    existing_progress_data[project_name] = progress_data[project_name]
    json.dump(existing_progress_data, data_file)
    data_file.close()

